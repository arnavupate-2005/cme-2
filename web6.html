<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Aditya-L1 • UV & CME Dashboard</title>
<!-- Chart.js and necessary plugins -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>

<style>
  :root{
    --bg:#0b1020;
    --card:#111831cc;
    --muted:#aab3cf;
    --text:#eaf0ff;
    --accent:#7c9bff;
    --accent2:#8ef0c8;
    --danger:#ff6b6b;
    --shadow: 0 20px 60px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.03);
    --radius: 20px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    color:var(--text);
    background:
      radial-gradient(1200px 600px at 20% -10%, #15213d 0%, transparent 60%),
      radial-gradient(900px 500px at 110% 10%, #0f2240 0%, transparent 60%),
      linear-gradient(180deg, #0b0f1a 0%, #0b1020 100%);
  }
  .wrap{max-width:1200px;margin:0 auto;padding:28px 18px 80px}
  header{display:flex;align-items:center;gap:14px;margin-bottom:22px;}
  .logo-img{width:80px;height:80px;object-fit:contain;background:#fff;
    border-radius:50%;padding:6px;box-shadow:0 4px 20px rgba(0,0,0,.35);}
  h1{margin:0;font-size:clamp(22px,3.2vw,34px)}
  .sub{color:var(--muted);font-size:14px;margin-top:2px}
  .cards{display:grid;gap:16px;grid-template-columns: repeat(12,1fr)}
  .card{
    grid-column: span 12;
    background: var(--card);
    backdrop-filter: blur(10px);
    border:1px solid rgba(255,255,255,.06);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding:20px;
  }
  @media(min-width:950px){
    .card--wide{grid-column: span 8}
    .card--side{grid-column: span 4}
  }
  h2{margin:.1rem 0 .6rem;font-size:clamp(18px,2.6vw,24px)}
  p{line-height:1.6;color:#d8def7}
  .pill{
    display:inline-flex;align-items:center;gap:8px;
    background:linear-gradient(135deg,#28335a,#1a2242);
    color:#cfe0ff;padding:8px 12px;border-radius:999px;font-size:12px;
    border:1px solid rgba(255,255,255,.06)
  }
  .btn{padding:12px 16px;border-radius:14px;font-weight:600;
    border:1px solid rgba(255,255,255,.08);
    background: linear-gradient(180deg, #2b3a7a, #1e2a59);
    color:#fff;cursor:pointer;transition: transform .15s ease;}
  .btn:hover{transform:translateY(-2px)}
  .btn.secondary{background:linear-gradient(180deg,#226a57,#174a3f)}
  .btn.danger{background:linear-gradient(180deg,#7a2b2b,#532020)}

  /* Tabs */
  .tabs{margin-top:16px}
  .tab-buttons{display:flex;gap:10px;flex-wrap:wrap}
  .tab-buttons .seg{
    padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.08);
    background:#121a34; color:#cfe0ff; cursor:pointer; font-weight:600;
  }
  .tab-buttons .seg.active{background:linear-gradient(135deg,#2b3a7a,#1e2a59);color:#fff}
  .tab-content{margin-top:14px}
  .panel{display:none;text-align:center}
  .panel.active{display:block;animation:fade .25s ease}
  @keyframes fade{from{opacity:.4;transform:translateY(6px)}to{opacity:1;transform:none}}
  img.display-img{max-width:100%;border-radius:14px;box-shadow:0 6px 20px rgba(0,0,0,.35);}

  /* Upload preview grid */
  .drop{border:2px dashed rgba(255,255,255,.12);border-radius:16px;
    padding:18px;text-align:center;color:#cfe0ff;background:rgba(255,255,255,.02)}
  .grid{display:grid;gap:12px;margin-top:14px;
    grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
  .thumb{position:relative;overflow:hidden;border-radius:14px;
    background:#0e1530;border:1px solid rgba(255,255,255,.06)}
  .thumb img{width:100%;height:140px;object-fit:cover}
  .thumb .cap{position:absolute;left:0;right:0;bottom:0;
    background:linear-gradient(180deg,transparent,rgba(0,0,0,.6));
    color:#fff;padding:8px 10px;font-size:12px}

  /* CME params */
  .params{margin-top:18px;text-align:left}
  .param{display:flex;justify-content:space-between;padding:6px 0;
    border-bottom:1px solid rgba(255,255,255,.08)}
  .alert-box{margin-top:18px;padding:12px;border-radius:12px;
    font-weight:600;text-align:center;background:rgba(255,255,255,.08);color:#fff;}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <img src="logo.jpg" alt="Aditya L1 Logo" class="logo-img" onerror="this.style.display='none'">
    <div>
      <h1>Aditya-L1 • Solar UV & CME Explorer</h1>
      <div class="sub">Explore CME parameters, harmfulness alerts, and Sun observations</div>
    </div>
  </header>

  <section class="cards">
    <!-- Main dashboard -->
    <article class="card card--wide">
      <div class="pill">Mission • Aditya-L1 (ISRO)</div>
      <h2>Dashboard</h2>
      <p>Upload, view, and analyze ultraviolet images and CME graphs. This tool combines Sun observations with CME parameter tracking.</p>

      <!-- Tabs -->
      <div class="tabs">
        <div class="tab-buttons">
          <button class="seg active" id="tab-images">Sun Images</button>
          <button class="seg" id="tab-graphs">UV Graphs</button>
        </div>
        <div class="tab-content">
          <!-- Sun Images tab -->
          <div class="panel active" id="panel-images">
            <div class="drop" id="dropImages">
              <p><strong>Upload Sun Images</strong></p>
              <input id="inputImages" type="file" accept="image/*" multiple hidden />
            </div>
            <div class="grid" id="gridImages"></div>
            <h2>Processed FITS Grid</h2>
            <img src="https://placehold.co/800x400/0b1020/eaf0ff?text=FITS+Grid+Placeholder" alt="FITS Grid" class="display-img">
          </div>

          <!-- Graphs tab -->
          <div class="panel" id="panel-graphs">
            <h2>Real-time UV Ratio Analysis</h2>
            <p style="text-align:center; font-size: 14px; color: var(--muted);">Click and drag to pan, use mouse wheel to zoom.</p>
            <div style="height: 400px; margin-top: 1rem;">
                <canvas id="uvChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- CME Parameters -->
      <div class="params">
        <h2>CME Parameters</h2>
        <div class="param"><span>Time</span><span id="p-time">--</span></div>
        <div class="param"><span>Speed</span><span id="p-speed">--</span></div>
        <div class="param"><span>Acceleration</span><span id="p-acc">--</span></div>
        <div class="param"><span>Angular Width</span><span id="p-width">--</span></div>
        <div class="param"><span>Mass</span><span id="p-mass">--</span></div>
        <div class="param"><span>Kinetic Energy</span><span id="p-energy">--</span></div>
        <div class="param"><span>Brightness</span><span id="p-bright">--</span></div>
        <div class="param"><span>Magnetic Field</span><span id="p-mag">--</span></div>
      </div>

      <!-- Alert -->
      <div id="alertBox" class="alert-box">No data available</div>
    </article>

    <!-- Info side card -->
    <aside class="card card--side">
      <div class="pill">Background</div>
      <h2>Coronal Mass Ejections (CMEs)</h2>
      <p>CMEs are huge expulsions of plasma and magnetic fields from the Sun’s corona. They can travel at millions of km/h, disturbing space weather, damaging satellites, and even impacting power grids on Earth.</p>
      <h2>Aditya-L1 Satellite</h2>
      <p><strong>Aditya-L1</strong> is India’s first solar observatory mission placed at the Lagrange point L1 (~1.5 million km from Earth). It continuously monitors the Sun’s atmosphere, ultraviolet radiation, and CMEs to improve space-weather forecasting.</p>
    </aside>
  </section>
</div>

<script>
  // Tabs switching
  const tabImages=document.getElementById('tab-images');
  const tabGraphs=document.getElementById('tab-graphs');
  const panelImages=document.getElementById('panel-images');
  const panelGraphs=document.getElementById('panel-graphs');
  function activate(tab){
    const isImages=tab.id==='tab-images';
    tabImages.classList.toggle('active',isImages);
    tabGraphs.classList.toggle('active',!isImages);
    panelImages.classList.toggle('active',isImages);
    panelGraphs.classList.toggle('active',!isImages);
  }
  tabImages.onclick=()=>activate(tabImages);
  tabGraphs.onclick=()=>activate(tabGraphs);

  // Upload previews
  function setupDrop(dropEl,inputEl,gridEl){
    dropEl.onclick=()=>inputEl.click();
    inputEl.onchange=(e)=>handleFiles(e.target.files,gridEl);
  }
  function handleFiles(files,grid){
    [...files].forEach(f=>{
      const url=URL.createObjectURL(f);
      const div=document.createElement('div');
      div.className='thumb';
      div.innerHTML=`<img src="${url}" alt="${f.name}"><div class="cap">${f.name}</div>`;
      grid.prepend(div);
    });
  }
  setupDrop(document.getElementById('dropImages'),document.getElementById('inputImages'),document.getElementById('gridImages'));
  setupDrop(document.getElementById('dropGraphs'),document.getElementById('inputGraphs'),document.getElementById('gridGraphs'));

  // --- Chart.js Graph Implementation ---
  document.addEventListener('DOMContentLoaded', () => {
    const rawData = [
        { Timestamp: '2025-08-20T03:07:08.357180000', 'UV Ratio': -148.292, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T03:08:40.325465000', 'UV Ratio': -290.782, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T03:17:52.135070000', 'UV Ratio': -70.483, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T03:19:24.107365000', 'UV Ratio': -63.607, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T03:32:15.601485000', 'UV Ratio': -1142.562, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T03:36:20.210165000', 'UV Ratio': -996.302, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T03:36:44.274090000', 'UV Ratio': -846.652, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T03:38:35.752530000', 'UV Ratio': -305.855, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T03:53:55.435170000', 'UV Ratio': -103.421, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T03:56:59.371625000', 'UV Ratio': -164.841, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:01:35.274490000', 'UV Ratio': -345.04, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:03:07.242650000', 'UV Ratio': -96.057, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:04:39.210945000', 'UV Ratio': -156.783, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:07:43.147390000', 'UV Ratio': -64.776, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:09:15.119685000', 'UV Ratio': -279.983, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:12:19.521300000', 'UV Ratio': -54.5, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:13:51.204250000', 'UV Ratio': -348.356, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:15:22.988710000', 'UV Ratio': -216.314, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:16:54.956870000', 'UV Ratio': -238.414, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:18:26.925165000', 'UV Ratio': -259.256, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:19:58.893450000', 'UV Ratio': -93.686, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:21:30.861735000', 'UV Ratio': -58.744, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:23:02.829905000', 'UV Ratio': -114.828, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:29:10.702930000', 'UV Ratio': -300.057, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:30:42.669225000', 'UV Ratio': -356.671, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:32:14.639510000', 'UV Ratio': -263.96, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:33:46.605795000', 'UV Ratio': -248.057, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:36:50.542250000', 'UV Ratio': -263.171, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:38:22.510535000', 'UV Ratio': -113.96, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:39:54.478830000', 'UV Ratio': -335.885, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:41:26.447115000', 'UV Ratio': -318.345, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:44:30.383695000', 'UV Ratio': -81.388, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:46:02.351855000', 'UV Ratio': -89.118, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:47:34.320025000', 'UV Ratio': -352.694, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:49:06.288310000', 'UV Ratio': -186.45, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:50:38.256595000', 'UV Ratio': -344.32, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:53:42.193175000', 'UV Ratio': -217.931, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:55:14.161460000', 'UV Ratio': -339.919, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:56:46.133755000', 'UV Ratio': -335.157, 'CME Alert': 'Quiet Sun' },
        { Timestamp: '2025-08-20T04:58:18.660400000', 'UV Ratio': -142.116, 'CME Alert': 'Quiet Sun' },
    ];

    const ctx = document.getElementById('uvChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            datasets: [{
                label: 'UV Ratio',
                data: rawData.map(d => ({ x: new Date(d.Timestamp), y: d['UV Ratio'], alert: d['CME Alert'] })),
                borderColor: 'var(--accent2)',
                backgroundColor: 'rgba(142, 240, 200, 0.1)',
                borderWidth: 2,
                pointBackgroundColor: 'var(--accent2)',
                pointRadius: 4,
                pointHoverRadius: 7,
                fill: true,
                tension: 0.3
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    type: 'time',
                    time: {
                        unit: 'minute',
                        tooltipFormat: 'HH:mm:ss',
                        displayFormats: {
                            minute: 'HH:mm'
                        }
                    },
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: 'var(--muted)'
                    },
                    title: {
                        display: true,
                        text: 'Timestamp',
                        color: 'var(--text)'
                    }
                },
                y: {
                    grid: {
                        color: 'rgba(255, 255, 255, 0.1)'
                    },
                    ticks: {
                        color: 'var(--muted)'
                    },
                    title: {
                        display: true,
                        text: 'UV Ratio',
                        color: 'var(--text)'
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = `UV Ratio: ${context.parsed.y.toFixed(3)}` || '';
                            return label;
                        },
                        afterLabel: function(context) {
                            // Access the custom 'alert' property from the data point
                            return `Status: ${context.raw.alert}`;
                        }
                    }
                },
                zoom: {
                    pan: {
                        enabled: true,
                        mode: 'x',
                    },
                    zoom: {
                        wheel: {
                            enabled: true,
                        },
                        pinch: {
                            enabled: true
                        },
                        mode: 'x',
                    }
                }
            }
        }
    });
  });
</script>
</body>
</html>